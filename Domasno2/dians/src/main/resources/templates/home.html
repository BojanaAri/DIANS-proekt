<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
<script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>

<div class="container">
    <h2>Изложби</h2>
    <div id="demo" class="carousel slide" data-ride="carousel">

        <!-- Indicators -->
        <ul class="carousel-indicators">
            <li data-target="#demo" data-slide-to="0" class="active"></li>
            <li data-target="#demo" data-slide-to="1"></li>
            <li data-target="#demo" data-slide-to="2"></li>
        </ul>

        <!-- The slideshow -->
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img src="https://nationalgallery.mk/wp-content/uploads/2023/11/from-the-cycle-Golden-Darkness-Meal-Acrylic-on-Paper-nga-cikli-Erresira-e-Arte-Shujta-Akrilik-ne-leter-2022-33x33cm-2-823x365.jpg" alt="Los Angeles" width="1100" height="500">
            </div>
            <div class="carousel-item">
                <img src="https://nationalgallery.mk/wp-content/uploads/2020/12/15.jpg"alt="Chicago" width="1100" height="500">
            </div>
            <div class="carousel-item">
                <img src="https://nationalgallery.mk/wp-content/uploads/2023/08/dimitrie-duracovski-triptih-1.jpg" alt="New York" width="1100" height="500">
            </div>
        </div>

        <!-- Left and right controls -->
        <a class="carousel-control-prev" href="#demo" data-slide="prev">
            <span class="carousel-control-prev-icon"></span>
        </a>
        <a class="carousel-control-next" href="#demo" data-slide="next">
            <span class="carousel-control-next-icon"></span>
        </a>
    </div>
</div>
<div class="container">
    <h2>Search Galleries by city</h2>
    <form class="form-inline" style="margin:20px;">
        <label  class="sr-only"for="city">City</label>
        <input type="text" class="form-control" id="city" value="Skopje">
    </form>
    <div id="osm-map" style="min-height: 450px;height: 450px; width: 1100px;"></div>
</div>
<script th:inline="javascript">
    var list = [[${galleries}]];
    console.log(list);
    // open streetmap integration with leaflet
    $(function(){
        "use strict";
// osm-map the id of div area where map should be shown
        var element = document.getElementById('osm-map');

// lat & long of center of map and marker
        var lat = '41.9945';
        var long =  '21.4319';



// Create Leaflet map on map element.
        var map = L.map(element, {scrollWheelZoom: false });

// Add Openstreetmap tile layer with attribution to the Leaflet map.
// this is important and worth to honor openstreetmap contributors
        L.tileLayer('https://{s}.tile.osm.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://osm.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);

// Your target's GPS coordinates.
        var target = L.latLng( lat , long );

// Set map's center to target with zoom 15.
        map.setView(target, 15);

// Place a marker on the same location.
        for(let i = 0; i < list.length; i++) {
            var marker = L.marker([list[i]['lon'], list[i]['lat']]).addTo(map);

            marker.bindPopup(`
                    <b>Галерија: ${list[i]['name']}</b>
                    <br>
                    <b${list[i]['address']}</b>
                    <br>
                     ${(list[i]['working_hours'])}
                    <br>
                    `)
                .openPopup();

        }

// Optional, but useful: change behaviour of autoscrollwheel
// only zoom after click, no autozoom on focus
        map.scrollWheelZoom.disable();
        map.on('click', () => { map.scrollWheelZoom.enable();});
        map.on('mouseout', () => { map.scrollWheelZoom.disable();});
    });
</script>